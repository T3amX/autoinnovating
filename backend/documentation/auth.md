# /api/v1/auth

## GET /

Возвращает список всех пользователей
Требования:
- Авторизованный администратор

Ответ: Массив json объектов

Пример ответа:
```
{
    "lines": [
        {
            "id": 1,
            "email": "123@123.ds",
            "login": "123",
            "is_admin": true,
            "is_disabled": false
        },
        {
            "id": 2,
            "email": "1234@123.ds",
            "login": "1234",
            "is_admin": false,
            "is_disabled": false
        },
        {
            "id": 3,
            "email": "somemail@mail.ru",
            "login": "admin",
            "is_admin": false,
            "is_disabled": false
        }
    ]
}
```

## GET /:id

Возвращает одного пользователя
Требования:
- Авторизированный администратор или авторизированный пользователь, которые обращается строго по своему id

Ответ: json объект данных о пользователе

Пример ответа:
```
{
  "user": {
        "id": 3,
        "email": "somemail@mail.ru",
        "login": "admin",
        "is_admin": false,
        "is_disabled": false
  }
}
```


## POST /

Регистрация пользователя
Требования:
- json строка формата
```
{
    "email": "123@123.ds",
    "login": "123",
    "password": "123123"
}
```
- Все поля валидируются на то, что они заполнены
- Поле email валидируется на соответствие формату email
- Поле password должно быть лоинной не менее 6 символов
  Ответ: json объект с полем message: "Successfully registered"


## POST /login

Авторизация пользователя.
Требования:
- json строка формата
```
{
    "login": "123",
    "password": "123123"
}
```
- в поле login может быть записан логин пользователя или его email
- оба поля должны быть не пустые
  Ответ: json объект с полем token

## POST /toggle_ban/:id

Бан/разбан пользователя
Требования:
- авторизованный администратор
  Ответ: json-объект с полем message со значением ok

## PUT /:id

Изменения данных о пользовтеле
Требования:
- json строка формата
```
{
    "password": "321123"
}
```

- Авторизированный администратор или авторизированный пользователь, которые обращается строго по своему id
  Ответ: json объект с полем "updated" со значением 1

## DELETE /:id

Удаление пользователя из базы данных
Требования:
- Авторизированный администратор или авторизированный пользователь, которые обращается строго по своему id
  Ответ: json объект с полем "deleted" со значением 1
